<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="text/html;charset=utf-8" http-equiv="Content-Type"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content=""><meta name="keywords" content="vue.js, vue, js, javascript, programming, development, webdev, front-end, front-end developer, front-end development"><link rel="icon" type="image/png" href="/assets/img/favicon-192x192.png" sizes="192x192"><link rel="preload" href="/assets/fonts/Bebas.eot" as="font" crossorigin="anonymous"><link rel="preload" href="/assets/fonts/Bebas.woff" as="font" crossorigin="anonymous"><link rel="preload" href="/assets/fonts/Bebas.ttf" as="font" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/main.css" type="text/css"><title>How I convinced myself to use EventBus in Vue.js?</title></head><body class="dark"><header><div class="main-container nav-container"><div class="logo-wrapper" id="logo"><div class="logo"></div></div><nav><ul><li><a href="/" data-hover="Home">Home</a></li><li><a href="/about" data-hover="About">About</a></li><li class="active"><a href="/notes" data-hover="Writing">Writing</a></li><li><a href="/projects" data-hover="Projects">Projects</a></li><li><a href="/experience" data-hover="CV">CV</a></li></ul></nav></div></header><div class="content notes-content"><div class="note-list-entry__wrapper"><div class="note-list-entry"><h1>How I convinced myself to use EventBus in Vue.js?</h1><div class="published">Published at 2018/11/06</div><article><blockquote>
  <p>Event Bus concept tends to have a bad opinion across most Vue.js developers. I was one of them.</p>
</blockquote>
<p>I use Vuex in all web applications I build. It enables me to handle state management and communication between components with ease. Surprisingly, I've found recently a perfect use-case of using Event Bus instead.</p>
<h2 id="disclaimer-i-still-tend-to-avoid-using-it">Disclaimer: I still tend to avoid using it</h2>
<p>I love idea behind Vuex (yes, I know that this is nothing new (I'm thinking about you, MobX/Redux)) and thanks to learning this concept I really started to understand what these React's alternatives are really about (which is just an another sign that Vue.js documentation is really that awesome ;) ).</p>
<p>You might think that I overkill it, but when my application needs to communicate between 2+ components, it means to me to use it as an excuse for importing Vuex into the project. It just makes code cleaner and easier to maintain.</p>
<h2 id="ok-so-whats-about-that-event-bus-then">Ok, so what's about that event bus then?</h2>
<p>Everything has started from a simple task: synchronize all clocks across the webpage so they will <em>tick</em> at the exact same moment.</p>
<p>Long story short: I've solved that problem by setting one global clock interval that emits a global Event Bus event - so instead of setting intervals inside components I've created one:</p>
<pre><code>// events.js file
import Vue from 'vue';
export const EventBus = new Vue();

// then in App.vue file

import { EventBus } from '@/helpers/events.js'

setInterval(() =&gt; {
  EventBus.$emit('updateGlobalClockEvent')
}, 1000)</code></pre>
<p>So now everywhere I want to update some time-dependent value I listen for that global event:</p>
<pre><code>// in component's code
&lt;template&gt;
&lt;div&gt;{{ someTimeDiffWeHaveToDisplay }}&lt;/div&gt;
&lt;/template&gt;
import { EventBus } from '@/helpers/events.js';
...
...
data () {
  return {
    currentTime: Date.now(),
    someRandomMomentInMs: 1541537741473
  }
},
computed: {
  someTimeDiffWeHaveToDisplay () {
    return Math.abs(this.currentTime - this.someRandomMomentInMs)
  }
},
methods: {
  updateCurrentTime () {
    this.currentTime = Date.now()
  }
}
...
created () {
  EventBus.$on('updateGlobalClockEvent', this.updateCurrentTime);
}</code></pre>
<p>Additionaly, you can upgrade this solution by using a Web Worker for handling the <code>setInterval</code> function so it won't be ever delayed by UI processing.</p>
<h2 id="show-me">SHOW me!</h2>
<p>Alright, if you are curious how this work, you can check this simple Code Sandbox I've prepared as an working example: <a href="https://codesandbox.io/s/7mwrmj69vq">https://codesandbox.io/s/7mwrmj69vq</a></p>
<p>What do you think about this solution?</p>
<p>Do you even use Event Bus for anything in your Vue.js applications?</p>
<p>-- ł.</p>
<blockquote>
  <p>This post is a part of my Vue.js tips &amp; tricks article series, based on personal experience while working on real-life projects.</p>
</blockquote></article><div class="published"><p>Categories:<a class="category-link" href="/notes/?category=tech">tech</a><a class="category-link" href="/notes/?category=vue.js">vue.js</a></p><p>Tags:<a class="category-link" href="/notes/?tag=vue.js">vue.js</a><a class="category-link" href="/notes/?tag=vue">vue</a><a class="category-link" href="/notes/?tag=js">js</a><a class="category-link" href="/notes/?tag=javascript">javascript</a><a class="category-link" href="/notes/?tag=programming">programming</a><a class="category-link" href="/notes/?tag=development">development</a><a class="category-link" href="/notes/?tag=webdev">webdev</a><a class="category-link" href="/notes/?tag=front-end">front-end</a><a class="category-link" href="/notes/?tag=front-end developer">front-end developer</a><a class="category-link" href="/notes/?tag=front-end development">front-end development</a></p></div></div></div></div><footer><div class="main-container footer-container"><div class="row"><div class="col-25"><ul><li class="title">Links</li><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/notes">Writing</a></li><li><a href="/projects">Projects</a></li><li><a href="/experience">CV</a></li></ul></div><div class="col-25"><ul><li class="title">Projects</li><li><a href="https://github.com/lukaszkups">Open Source Code</a></li><li><a href="https://store.steampowered.com/app/1935130/Terry_Poorflyer/">Terry Poorflyer PC game</a></li><li><a href="https://lukaszkups.itch.io/">Game prototypes</a></li></ul></div><div class="col-25"><ul><li class="title">Categories</li><li><a href="/notes/?tag=programming">Programming</a></li><li><a href="/notes/?tag=vue">Vue.js</a></li><li><a href="/notes/?tag=reviews">Reviews</a></li><li><a href="/notes/?tag=thoughts">Thoughts</a></li></ul></div><div class="col-25"><ul><li class="title">Social</li><li><a href="https://twitter.com/lukaszkups">Twitter</a></li><li><a href="https://github.com/lukaszkups">GitHub</a></li><li><a href="https://linkedin.com/in/lukaszkups">LinkedIn</a></li><li><a href="https://gum.co/tATgO?wanted=true" target="_blank">Buy me a coffee</a></li></ul></div></div><div class="row copyrights">©&nbsp;<span id="year">2020</span>&nbsp;lukaszkups. All Rights Reserved.</div></div></footer><script src="/assets/js/main.js"></script><script src="https://gumroad.com/js/gumroad.js"></script></body></html>