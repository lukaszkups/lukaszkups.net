<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="text/html;charset=utf-8" http-equiv="Content-Type"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content=""><meta name="keywords" content="programming, tech, development, webdev, vue, vue.js, javascript, js, web development, front-end, front-end development, front-end developer"><link rel="icon" type="image/png" href="/assets/img/favicon-192x192.png" sizes="192x192"><link rel="preload" href="/assets/fonts/Bebas.eot" as="font" crossorigin="anonymous"><link rel="preload" href="/assets/fonts/Bebas.woff" as="font" crossorigin="anonymous"><link rel="preload" href="/assets/fonts/Bebas.ttf" as="font" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/main.css" type="text/css"><title>Circular reference problem in Vue</title></head><body class="dark"><header><div class="main-container nav-container"><div class="logo-wrapper" id="logo"><div class="logo"></div></div><nav><ul><li><a href="/" data-hover="Home">Home</a></li><li><a href="/about" data-hover="About">About</a></li><li class="active"><a href="/notes" data-hover="Writing">Writing</a></li><li><a href="/projects" data-hover="Projects">Projects</a></li><li><a href="/experience" data-hover="CV">CV</a></li></ul></nav></div></header><div class="content notes-content"><div class="note-list-entry__wrapper"><div class="note-list-entry"><h1>Circular reference problem in Vue</h1><div class="published">Published at 2020/05/21</div><article><p>For the last couple days I've been working on a component that is meant to reuse itself if needed recursively. Everything was going smooth until I've met the case where it actually had an opportunity to do it. Unfortunately, I've got an error:</p>
<pre><code>[Vue warn]: Unknown custom element: XYZ - did you register the component correctly? For recursive components, make sure to provide the "name" option.</code></pre>
<p>I was confused. Why does it throw me such error if everything seems to be just fine, I've already registered the component's name, everything was on its place.</p>
<p>When I double-checked all the stuff I thought might relate to this error message, I've started blind guessing - change this or change that and see what happens. But nothing was preventing error from being thrown.</p>
<p>Until I've commented out the component's calling itself it its template part.</p>
<p>I was then: OK, so this is really something related to component's recursion - but what's going on exacltly? I'm providing <code>name</code> option and all the other stuff.</p>
<p>Then, I've found out this nice piece of Vue documentation, <a href="https://vuejs.org/v2/guide/components-edge-cases.html#Circular-References-Between-Components">Handling edge cases</a>:</p>
<blockquote>
  <p>To explain what’s happening, let’s call our components A and B. The module system sees that it needs A, but first A needs B, but B needs A, but A needs B, etc. It’s stuck in a loop, not knowing how to fully resolve either component without first resolving the other.</p>
</blockquote>
<p>And to solve that, you can wait until <code>beforeCreate</code> lifecycle with registering the component:</p>
<pre><code>beforeCreate () {
  this.$options.components.XyzComponent = require('@/components/Xyz/XyzComponent.vue').default
}</code></pre>
<p>but personally, I prefer another option, that is using Webpack's asynchronous import:</p>
<pre><code>components: {
  XyzComponent: () =&gt; import('@/components/Xyz/XyzComponent.vue')
}</code></pre>
<p>And voila! It should fix the case related to circular component references.</p>
<p>-- ł.</p></article><div class="published"><p>Categories:<a class="category-link" href="/notes/?category=programming">programming</a></p><p>Tags:<a class="category-link" href="/notes/?tag=programming">programming</a><a class="category-link" href="/notes/?tag=tech">tech</a><a class="category-link" href="/notes/?tag=development">development</a><a class="category-link" href="/notes/?tag=webdev">webdev</a><a class="category-link" href="/notes/?tag=vue">vue</a><a class="category-link" href="/notes/?tag=vue.js">vue.js</a><a class="category-link" href="/notes/?tag=javascript">javascript</a><a class="category-link" href="/notes/?tag=js">js</a><a class="category-link" href="/notes/?tag=web development">web development</a><a class="category-link" href="/notes/?tag=front-end">front-end</a><a class="category-link" href="/notes/?tag=front-end development">front-end development</a><a class="category-link" href="/notes/?tag=front-end developer">front-end developer</a></p></div></div></div></div><footer><div class="main-container footer-container"><div class="row"><div class="col-25"><ul><li class="title">Links</li><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/notes">Writing</a></li><li><a href="/projects">Projects</a></li><li><a href="/experience">CV</a></li></ul></div><div class="col-25"><ul><li class="title">Projects</li><li><a href="https://github.com/lukaszkups">Open Source Code</a></li><li><a href="https://store.steampowered.com/app/1935130/Terry_Poorflyer/">Terry Poorflyer PC game</a></li><li><a href="https://lukaszkups.itch.io/">Game prototypes</a></li></ul></div><div class="col-25"><ul><li class="title">Categories</li><li><a href="/notes/?tag=programming">Programming</a></li><li><a href="/notes/?tag=vue">Vue.js</a></li><li><a href="/notes/?tag=reviews">Reviews</a></li><li><a href="/notes/?tag=thoughts">Thoughts</a></li></ul></div><div class="col-25"><ul><li class="title">Social</li><li><a href="https://twitter.com/lukaszkups">Twitter</a></li><li><a href="https://github.com/lukaszkups">GitHub</a></li><li><a href="https://linkedin.com/in/lukaszkups">LinkedIn</a></li><li><a href="https://gum.co/tATgO?wanted=true" target="_blank">Buy me a coffee</a></li></ul></div></div><div class="row copyrights">©&nbsp;<span id="year">2020</span>&nbsp;lukaszkups. All Rights Reserved.</div></div></footer><script src="/assets/js/main.js"></script><script src="https://gumroad.com/js/gumroad.js"></script></body></html>